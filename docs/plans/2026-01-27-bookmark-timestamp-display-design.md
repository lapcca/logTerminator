# 书签时间显示功能设计

**日期:** 2026-01-27
**状态:** 已批准
**相关功能:** 书签栏增强

## 概述

在书签栏的每个书签项中添加时间显示，显示对应日志条目的时间戳部分（HH:mm:ss,SSS格式），便于用户快速识别书签的时间信息。

## 目标

- 在书签列表中显示每个书签对应日志的时间
- 提取完整时间戳中的时间部分（时:分:秒,毫秒）
- 保持简洁的布局和样式
- 不影响现有功能

## 设计方案

### 1. 布局

**新布局结构：**
```
[头像] [时间] [标题] [编辑][删除]
```

**元素顺序：**
1. 书签头像（StarFilled图标）
2. 时间显示（07:58:29,723 格式）
3. 书签标题
4. 编辑/删除按钮

### 2. 数据获取

**数据来源：**
- 书签数据结构：`[(bookmark, log_entry), ...]`
- 时间戳字段：`log_entry.timestamp`
- 完整格式：`2026/01/22 07:58:29,723 UTC`

**时间提取函数：**
```javascript
function extractTimeFromTimestamp(timestamp) {
  if (!timestamp) return '--:--:--,---'
  const match = timestamp.match(/(\d{2}:\d{2}:\d{2},\d{3})/)
  return match ? match[1] : '--:--:--,---'
}
```

### 3. 样式规范

**时间显示样式：**
- 字体：普通字体（非等宽）
- 对齐：左对齐
- 字号：13px
- 颜色：#606266（灰色）
- 空白：不换行（`white-space: nowrap`）
- 收缩：不压缩（`flex-shrink: 0`）

**标题样式：**
- 弹性：占据剩余空间（`flex: 1`）
- 溢出：文本省略（`text-overflow: ellipsis`）

### 4. 错误处理

| 场景 | 显示内容 |
|------|----------|
| 时间戳为空 | `--:--:--,---` |
| 格式不匹配 | `--:--:--,---` |
| 正常情况 | `07:58:29,723` |

### 5. 实现修改

**文件：** `src/App.vue`

**修改点：**

1. **添加辅助函数**（script setup 区域）
2. **更新模板**（第1339-1364行）
   - 添加时间 span 元素
   - 调整元素顺序
3. **更新样式**（CSS 区域）
   - 添加 `.bookmark-time` 类
   - 更新 `.bookmark-item` 布局

## 测试验证

- [ ] 正常时间戳正确提取
- [ ] 空时间戳显示占位符
- [ ] 异常格式显示占位符
- [ ] 多个书签时间对齐
- [ ] 悬停操作按钮正常
- [ ] 书签跳转功能正常
- [ ] 编辑/删除功能正常

## 兼容性

- 与现有书签功能完全兼容
- 不影响书签跳转、编辑、删除功能
- 不影响书签颜色标记功能
